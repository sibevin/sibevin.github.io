APP_DATA={};APP_DATA.posts=[{title:"如何在ruby中轉換integer與bit string",datetime:"2014-02-20 09:52:39",tag:["ruby"],category:["programming"],link:"ruby-how-to-convert-integer-to-bit-string",file:"2014-02-20-095239-ruby-how-to-convert-integer-to-bit-string",template:["post"]},{title:"dup與clone的差異",datetime:"2014-02-20 10:08:54",tag:["ruby"],category:["programming"],template:["post"],link:"ruby-compare-dup-and-clone",file:"2014-02-20-100854-ruby-compare-dup-and-clone"},{title:"ruby class的initialize",datetime:"2014-02-22 11:28:58",tag:["ruby"],category:["programming"],link:"ruby-class-initialize",file:"2014-02-22-112858-ruby-class-initialize",template:["post"]},{title:"如何在rails的controller中做到before_render",datetime:"2014-02-23 13:00:36",tag:["rails_controller"],category:["programming"],link:"rails-how-to-before-render",file:"2014-02-23-130036-rails-how-to-before-render",template:["post"]},{title:"如何顯示utf8的欄位",tag:["mysql"],category:["tools"],datetime:"2014-03-04 13:10:15",template:["post"],link:"mysql-utf8-display",file:"2014-03-04-131015-mysql-utf8-display"},{title:"ruby在if中的assignment",datetime:"2014-03-25 12:28:57",tag:["ruby"],category:["programming"],link:"ruby-if-assignment",file:"2014-03-25-122857-ruby-if-assignment",template:["post"]},{title:"ruby module的用法",datetime:"2014-05-04 08:17:14",tag:["ruby"],category:["programming"],link:"ruby-module",file:"2014-05-04-081714-ruby-module",template:["post"]},{title:"測量mysql query的效能",category:["programming"],tag:["mysql"],datetime:"2014-08-05 12:45:32",template:["post"],link:"mysql-profiling-query",file:"2014-08-05-124532-mysql-profiling-query"},{title:"如何轉換時間字串",category:["programming"],tag:["ruby"],datetime:"2014-09-18 09:48:05",template:["post"],link:"ruby-how-to-parse-time-string",file:"2014-09-18-094805-ruby-how-to-parse-time-string"},{title:"vim在使用自動補齊的時候會爆",category:["tools"],tag:["vim"],datetime:"2014-09-18 11:58:02",template:["post"],link:"vim-dot-auto-complete-crash",file:"2014-09-18-115802-vim-dot-auto-complete-crash"},{title:"oh-my-zsh一些實用小技巧",datetime:"2014-09-28 09:48:56",tag:["zsh"],category:["tools"],template:["post"],link:"oh-my-zsh-tips",file:"2014-09-28-094856-oh-my-zsh-tips"},{title:"Random Token",datetime:"2014-10-06 11:01:55",tag:["ruby_gem","work"],category:["programming"],link:"work-random-token",file:"2014-10-06-110155-work-random-token",template:["post"]},{title:"如何使用grunt, bower與npm製做js package - part 1 - 概觀、bower.json與package.json",datetime:"2014-10-08 11:26:48",tag:["js_serial_how-to-package-js"],category:["programming"],link:"how-to-build-js-package-with-grunt-bower-npm-01",file:"2014-10-08-112648-how-to-build-js-package-with-grunt-bower-npm-01",template:["post"]},{title:"如何使用grunt, bower與npm製做js package - part 2 - 使用grunt建立自動化流程",datetime:"2014-10-12 23:34:03",tag:["js_serial_how-to-package-js"],category:["programming"],link:"how-to-build-js-package-with-grunt-bower-npm-02",file:"2014-10-12-233403-how-to-build-js-package-with-grunt-bower-npm-02",template:["post"],draft:true},{title:"使用rvm安裝ruby 2.1.3遇到的一些問題",datetime:"2014-10-14 09:55:19",tag:["ruby"],category:["programming"],link:"install-ruby-213-with-rvm",file:"2014-10-14-095519-install-ruby-213-with-rvm",template:["post"]},{title:"如何建立gem package",datetime:"2014-10-15 10:11:21",tag:["ruby"],category:["programming"],link:"how-to-build-ruby-gem-package",file:"2014-10-15-101121-how-to-build-ruby-gem-package",template:["post"]},{title:"Sub Cipher",datetime:"2014-10-18 11:49:13",tag:["ruby_gem","work"],category:["programming"],link:"gem-sub-cipher",file:"2014-10-18-114913-gem-sub-cipher",template:["post"]},{title:"如何在pre顯示html的原始碼",datetime:"2014-10-22 12:35:57",tag:["html"],category:["programming"],link:"html-put-html-source-code-in-pre",file:"2014-10-22-123557-html-put-html-source-code-in-pre",template:["post"]},{title:"Simple Enum",datetime:"2014-10-24 11:17:26",tag:["ruby_gem","rails_model"],category:["programming"],link:"gem-simple-enum",file:"2014-10-24-111726-gem-simple-enum",template:["post"]},{title:"使用ruby寫script的雜記事本",datetime:"2014-10-29 11:22:22",tag:["ruby"],category:["programming"],link:"ruby-script-programming-notes",file:"2014-10-29-112222-ruby-script-programming-notes",template:["post"],draft:true},{title:"AngularJS錯誤筆記",datetime:"2014-10-30 10:18:01",tag:["angularjs"],category:["programming"],link:"angular-error-notes",file:"2014-10-30-101801-angular-error-notes",template:["post"],draft:true},{title:"vim指令一覽",datetime:"2014-03-03 00:22:40",tag:["vim","cheat-sheet"],category:["tools"],link:"vim-cheat-sheet",file:"2014-03-03-002240-vim-cheat-sheet",template:["post"],draft:true},{title:"Sub Cipher 2014-10-18",datetime:"2014-10-24 11:48:19",tag:["ruby_gem","work"],category:["programming"],link:"gem-sub-cipher",file:"2014-10-24-114819-gem-sub-cipher",template:["post"],draft:true}];APP_DATA.tags={ruby:{name:"ruby",count:9},rails_controller:{name:"rails_controller",count:1},rails:{name:"rails",count:0},mysql:{name:"mysql",count:2},vim:{name:"vim",count:2},zsh:{name:"zsh",count:1},ruby_gem:{name:"ruby_gem",count:4},work:{name:"work",count:3},"js_serial_how-to-package-js":{name:"js_serial_how-to-package-js",count:2},js:{name:"js",count:0},js_serial:{name:"js_serial",count:0},html:{name:"html",count:1},rails_model:{name:"rails_model",count:1},angularjs:{name:"angularjs",count:1},"cheat-sheet":{name:"cheat-sheet",count:1}};APP_DATA.categories={programming:{name:"programming",count:19},tools:{name:"tools",count:4}};APP={brand:"魔法師的手杖",author:"Sibevin Wang",footer_trademark:"2014 魔法師的手杖",header_title:"寫程式就像施展魔法一樣"};ROUTES={"/":{template:"layout/home.html",ctrl:"HomeCtrl"},"/tag":{template:"layout/tag_list.html",ctrl:"TagListCtrl"},"/tag/:tag":{template:"layout/tag.html",ctrl:"TagCtrl"},"/category":{template:"layout/ca_list.html",ctrl:"CaListCtrl"},"/category/:ca":{template:"layout/ca.html",ctrl:"CaCtrl"},"/post/:year/:month/:day/:link":{template:"layout/post.html",ctrl:"PostCtrl"},"/post":{template:"layout/post_list.html",ctrl:"PostListCtrl"},"/post/:keyword":{template:"layout/post_list.html",ctrl:"PostListCtrl"},"/post/:year/:month":{template:"layout/post_list.html",ctrl:"PostListCtrl"},"/post/:year/:month/:day":{template:"layout/post_list.html",ctrl:"PostListCtrl"}};ROUTES={"/":{template:"layout/home.html",ctrl:"HomeCtrl"},"/tag":{template:"layout/tag_list.html",ctrl:"TagListCtrl"},"/tag/:tag":{template:"layout/tag.html",ctrl:"TagCtrl"},"/category":{template:"layout/ca_list.html",ctrl:"CaListCtrl"},"/category/:ca":{template:"layout/ca.html",ctrl:"CaCtrl"},"/post/:year/:month/:day/:link":{template:"layout/post.html",ctrl:"PostCtrl"},"/post":{template:"layout/post_list.html",ctrl:"PostListCtrl"},"/post/:keyword":{template:"layout/post_list.html",ctrl:"PostListCtrl"},"/post/:year/:month":{template:"layout/post_list.html",ctrl:"PostListCtrl"},"/post/:year/:month/:day":{template:"layout/post_list.html",ctrl:"PostListCtrl"}};(function(){var a;a=angular.module("scsBlogApp",["ngRoute","hljs"]);a.config(["$routeProvider",function(d){var e,c,b;b=[];for(e in ROUTES){c=ROUTES[e];if(c.ctrl){b.push(d.when(e,{controller:c.ctrl,templateUrl:"./"+c.template}))}else{b.push(d.when(e,{templateUrl:"./"+c.template}))}}return b}]);angular.element(document).ready(function(){return angular.bootstrap(document,["scsBlogApp"])})}).call(this);(function(){var a=[].indexOf||function(d){for(var c=0,b=this.length;c<b;c++){if(c in this&&this[c]===d){return c}}return -1};angular.module("scsBlogApp").factory("TabSwitcher",function(){var b;b=(function(){c.prototype.DEFAULT_TAB="none";c.prototype._init_tab=c.DEFAULT_TAB;c.prototype._current_tab=c.DEFAULT_TAB;c.prototype.reset=function(){return this._current_tab=this._init_tab};c.prototype.getTab=function(){return this._current_tab};c.prototype.setTab=function(d){return this._current_tab=d};c.prototype.isTab=function(d){var e;if(d instanceof Array){return e=this._current_tab,a.call(d,e)>=0}else{return d===this._current_tab}};c.prototype["switch"]=function(d){if(this.isTab(d)){return this.reset()}else{return this.setTab(d)}};function c(d){if(d==null){d=this.DEFAULT_TAB}this._init_tab=d;this.setTab(d)}return c})();return b})}).call(this);(function(){angular.module("scsBlogApp").directive("tagChooser",function(){return{restrict:"EA",replace:true,scope:{tcUid:"@",tcTags:"=",tcModel:"=",tcAllModel:"=",onTcAllChange:"&",onTcChange:"&"},template:'<div class="tag-filter"> <div class="tag-opt"> <input type="checkbox" id="{{tcUid}}_tc_all" name="{{tcUid}}_tag_chooser" value="all" ng-model="tcAllModel" ng-change="onTcAllChange()" /> <label class="tag-label" for="{{tcUid}}_tc_all"> <span class="tag-icon">All</span> </label> </div> <div class="tag-opt" ng-repeat="tag in tcTags | orderBy:\'name\'"> <input type="checkbox" id="{{tcUid}}_tc_{{tag.name}}" name="{{tcUid}}_tag_chooser" value="{{tag.name}}" ng-model="tcModel[tag.name]" ng-change="onTcChange()" /> <label class="tag-label" for="{{tcUid}}_tc_{{tag.name}}"> <span class="tag-icon">{{showTag(tag.name)}}</span> </label> </div> <div class="clearfix" /> </div>',controller:["$scope","$element","$attrs",function(c,b,a){return c.showTag=function(d){return d.replace(/_/g," > ")}}]}})}).call(this);(function(){angular.module("scsBlogApp").directive("tagTitleDisplay",function(){return{restrict:"EA",replace:true,scope:{ttdModel:"="},template:'<span class="tag-title-display"> <span ng-repeat="sub_title_tag in sub_tags"> <span ng-show="$index > 0"> &gt; </span> <a href="#/tag/{{ sub_title_tag.link }}"> {{ sub_title_tag.name }} </a> </span> </div>',controller:["$scope","$element","$attrs",function(c,b,a){var d;d=function(){var j,h,g,i,f,e;c.sub_tags=[];g=c.ttdModel.split("_");j=[];e=[];for(i=0,f=g.length;i<f;i++){h=g[i];j.push(h);e.push(c.sub_tags.push({name:h,link:j.join("_")}))}return e};return d()}]}})}).call(this);(function(){var a=[].indexOf||function(d){for(var c=0,b=this.length;c<b;c++){if(c in this&&this[c]===d){return c}}return -1};angular.module("scsBlogApp").controller("CaCtrl",["$scope","$filter","$routeParams","$location",function(b,d,c,f){var e;b.getCaPosts=function(g,i){var h;h=d("orderBy")(g,"datetime",true);h=d("filter")(h,function(m){var l,j,o,k,n;j=false;n=m.category;for(o=0,k=n.length;o<k;o++){l=n[o];if(l===i){j=true;break}}return j});return h};e=function(){var g;b.posts=APP_DATA.posts;b.enableFilterPanel(false);if(c.ca&&(g=c.ca,a.call(_.keys(APP_DATA.categories),g)>=0)){b.target_ca=c.ca;return b.updateHeaderTitle("文章標籤 – "+b.showCa(b.target_ca))}else{return f.path("#/category")}};return e()}])}).call(this);(function(){angular.module("scsBlogApp").controller("CaListCtrl",["$scope","$filter","$routeParams","$anchorScroll","$location",function(a,c,b,e,f){var d;a.clearQuery=function(){return a.query_keyword=""};a.getFilteredCas=function(){var g;g=c("orderBy")(a.categories);if(a.query_keyword!==""){g=c("filter")(g,a.query_keyword)}return g};d=function(){a.updateHeaderTitle("文章分類");a.enableFilterPanel(false);a.categories=_.keys(APP_DATA.categories);return a.query_keyword=""};return d()}])}).call(this);(function(){angular.module("scsBlogApp").controller("FilterPanelCtrl",["$scope","$filter",function(b,e){var f,a,d,c;b.onCfAllChange=function(){var i,k,h,j,g;b.fp_data.ca=[];b.ca_filter_all=true;j=b.categories;g=[];for(k=0,h=j.length;k<h;k++){i=j[k];g.push(b.ca_filter[i.name]=false)}return g};b.onCfChange=function(){b.fp_data.ca=_.keys(_.omit(b.ca_filter,function(g){return g===false}));if(b.fp_data.ca.length>0){return b.ca_filter_all=false}else{return b.onCfAllChange()}};b.onTfAllChange=function(){var g,k,i,j,h;b.fp_data.tag=[];b.tag_filter_all=true;j=b.tags;h=[];for(k=0,i=j.length;k<i;k++){g=j[k];h.push(b.tag_filter[g.name]=false)}return h};b.onTfChange=function(){b.fp_data.tag=_.keys(_.omit(b.tag_filter,function(g){return g===false}));if(b.fp_data.tag.length>0){return b.tag_filter_all=false}else{return b.onTfAllChange()}};a=function(){b.ca_filter={};b.tag_filter={};b.fp_data.ca=[];return b.fp_data.tag=[]};c=function(){return b.tags=_.values(APP_DATA.tags)};d=function(){return b.categories=_.values(APP_DATA.categories)};f=function(){a();c();d();b.onCfAllChange();return b.onTfAllChange()};return f()}])}).call(this);(function(){angular.module("scsBlogApp").controller("HomeCtrl",["$scope","$filter",function(a,c){var e,d,b;e=2;a.getRecentPosts=function(g){var f;f=a.getFilteredPosts(g);f=c("filter")(f,function(i){var j,h;j=new Date();j.setMonth(j.getMonth()-e);h=new Date(i.datetime);return h>j});return f};b=function(){return a.posts=APP_DATA.posts};d=function(){a.$parent.updateHeaderTitle(APP.header_title);return b()};return d()}])}).call(this);(function(){var a=[].indexOf||function(d){for(var c=0,b=this.length;c<b;c++){if(c in this&&this[c]===d){return c}}return -1};angular.module("scsBlogApp").controller("PostCtrl",["$scope","$filter","$routeParams","$location","$http",function(h,e,g,c,f){var d,b,i,j;d={title:"",categories:[],tags:[],datetime:"0000-00-00 00:00:00",link:""};i=function(k){return a.call(target_post.template,k)>=0};b=function(k){return"drafts/"+k.file+".html"};j=function(){var k;h.enableFilterPanel(false);h.target_post=_.find(APP_DATA.posts,function(l){return l.link===g.link});h.setPrintMode(g.display==="print");if(h.target_post){h.$parent.updateHeaderTitle(h.target_post.title);k=h.getPostHtmlFile(h.target_post);return f({method:"GET",url:k}).success(function(n,l,o,m){h.target_html=k;return h.is_draft=h.target_post.draft===true}).error(function(n,l,o,m){k=b(h.target_post);return f({method:"GET",url:k}).success(function(r,p,s,q){h.target_html=k;return h.is_draft=true}).error(function(r,p,s,q){h.$parent.updateHeaderTitle("找不到對應網址的文章…");h.target_post=d;return h.target_html="errors/404.html"})})}else{h.$parent.updateHeaderTitle("找不到對應網址的文章…");h.target_post=d;return h.target_html="errors/404.html"}};return j()}])}).call(this);(function(){angular.module("scsBlogApp").controller("PostListCtrl",["$scope","$filter","$routeParams","$location",function(i,e,h,c){var a,f,j,b,d,g;g=function(k){return k.match(/(\d{4})/)};d=function(k){var l;l=parseInt(k);return l>0&&l<13};b=function(l,k,n){var m;m=new Date(l+"-"+k+"-"+n);if(Object.prototype.toString.call(m)!=="[object Date]"){return false}if(isNaN(m)){return false}else{return true}};f=function(l,m,k){if(m==null){m=1}if(k==null){k=1}l=parseInt(l);m=parseInt(m)-1;return new Date(l,m,k)};a=function(l,m,k){var n;if(m==null){m=null}if(k==null){k=null}if(m===null){l=parseInt(l);m=0;k=1;n=new Date(l+1,m,k)}else{if(k===null){m=parseInt(m)-1;k=1;n=new Date(l,m+1,k)}else{m=parseInt(m)-1;k=parseInt(k);n=new Date(l,m,k+1)}}return new Date(n-1)};j=function(){var o,k,p,l,n,m;i.posts=APP_DATA.posts;i.enableFilterPanel(true);k={};n=[];if(h.keyword){if(g(h.keyword)){l="date";p=h.keyword+"年";k.start_date=f(h.keyword);k.end_date=a(h.keyword);n.push(h.keyword)}else{l="keyword";p='"'+h.keyword+'"';k.keyword=h.keyword}}else{if(h.year){if(g(h.year)){m=h.year;n.push(m);if(h.month&&d(h.month)){o=h.month;n.push(o);if(h.day&&b(m,o,h.day)){l="date";p=m+"∙"+o+"∙"+h.day;k.start_date=f(m,o,h.day);k.end_date=a(m,o,h.day);n.push(h.day)}else{l="date";p=m+"年"+o+"月";k.start_date=f(m,o);k.end_date=a(m,o)}}else{l="date";p=m+"年";k.start_date=f(m);k.end_date=a(m)}}}else{l="all"}}switch(l){case"date":i.posts_in_where="所有"+p+"的文章("+k.start_date+" - "+k.end_date+")";i.$parent.updateHeaderTitle("文章列表 – "+p);i.options=k;return i.title_display=n.join("∙");case"keyword":i.posts_in_where="包含"+p+"標題的所有文章";i.$parent.updateHeaderTitle("文章列表 – 標題包含"+p+"的文章");i.options=k;return i.title_display=p;default:return i.$parent.updateHeaderTitle("文章列表")}};return j()}])}).call(this);(function(){var a=[].indexOf||function(d){for(var c=0,b=this.length;c<b;c++){if(c in this&&this[c]===d){return c}}return -1};angular.module("scsBlogApp").controller("RootCtrl",["$scope","$filter","TabSwitcher",function(c,f,d){var e,g,b;e=function(i){var h;h=i.datetime.match(/(\d{4})-(\d{2})-(\d{2})/);return _.rest(h)};c.showTag=function(h){return h.replace(/_/g," > ")};c.showTagCount=function(h){if(APP_DATA.tags[h]){return APP_DATA.tags[h].count}else{return 0}};c.showCa=function(h){return h};c.showCaCount=function(h){if(APP_DATA.categories[h]){return APP_DATA.categories[h].count}else{return 0}};c.getPostHtmlFile=function(h){return"posts/"+h.file+".html"};c.getDateLink=function(j,k){var i,l,h;i=e(j);l="#/post/";h=(function(){switch(k){case"y":return(_.initial(i,2)).join("/");case"m":return(_.initial(i,1)).join("/");case"d":return i.join("/")}})();return l+h};c.getPostLink=function(i){var h;h=e(i);return"#/post/"+h.join("/")+"/"+i.link};c.getDateValue=function(j,k){var i,h;i=e(j);h=(function(){switch(k){case"y":return i[0];case"m":return i[1];case"d":return i[2]}})();return h};c.updateHeaderTitle=function(h){return c.header_title=h};c.enableFilterPanel=function(h){return c.enable_fp=h};c.showFp=function(){return c.enable_fp&&c.menu_ts.isTab("fp")};c.setPrintMode=function(h){return c.is_print_mode=h};c.getFilteredPosts=function(h,j){var i;if(j==null){j=null}i=f("orderBy")(h,"datetime",true);if(c.fp_data.tag.length>0){i=f("filter")(i,function(r){var s,k,t,o,n,q,l,p,m;s=false;p=r.tag;for(o=0,q=p.length;o<q;o++){t=p[o];if(a.call(c.fp_data.tag,t)>=0){s=true;break}m=t.split("_");for(n=0,l=m.length;n<l;n++){k=m[n];if(a.call(c.fp_data.tag,k)>=0){s=true;break}}if(s){break}}return s})}if(c.fp_data.ca.length>0){i=f("filter")(i,function(s){var n,t,q,o,m,r,k,p,l;t=false;p=s.category;for(o=0,r=p.length;o<r;o++){n=p[o];if(a.call(c.fp_data.ca,n)>=0){t=true;break}l=n.split("_");for(m=0,k=l.length;m<k;m++){q=l[m];if(a.call(c.fp_data.ca,q)>=0){t=true;break}}if(t){break}}return t})}if(c.fp_data.keyword!==""){i=f("filter")(i,c.fp_data.keyword)}if(j){if(j.start_date){i=f("filter")(i,function(k){var l;l=new Date(k.datetime);return l>=j.start_date})}if(j.end_date){i=f("filter")(i,function(k){var l;l=new Date(k.datetime);return l<j.end_date})}if(j.keyword){i=f("filter")(i,j.keyword)}}return i};b=function(){c.brand=APP.brand;c.author=APP.author;c.footer_trademark=APP.footer_trademark;c.menu_ts=new d("close");c.enable_fp=true;c.fp_data={};c.fp_data.ca=[];c.fp_data.tag=[];c.fp_data.keyword="";c.is_print_mode=false;return c.is_slides_mode=false};g=function(){return b()};return g()}])}).call(this);(function(){var a=[].indexOf||function(d){for(var c=0,b=this.length;c<b;c++){if(c in this&&this[c]===d){return c}}return -1};angular.module("scsBlogApp").controller("TagCtrl",["$scope","$filter","$routeParams","$anchorScroll","$location",function(b,e,d,g,h){var c,f;c="";b.scrollTo=function(j){var i;i=h.hash();h.hash(j);g();return h.hash(i)};b.getTagList=function(n){var i,k,m,j,l;if(n===""){return[]}k=[n];l=_.keys(APP_DATA.tags);for(m=0,j=l.length;m<j;m++){i=l[m];if(i.indexOf(n)>-1){k.push(i)}}return _.uniq(k)};b.getTagPosts=function(i,k){var j;j=e("orderBy")(i,"datetime",true);j=e("filter")(j,function(o){var m,l,q,n,p;m=false;p=o.tag;for(q=0,n=p.length;q<n;q++){l=p[q];if(l===k){m=true;break}}return m});return j};f=function(){var i;b.posts=APP_DATA.posts;b.enableFilterPanel(false);if(d.tag&&(i=d.tag,a.call(_.keys(APP_DATA.tags),i)>=0)){b.target_tag=d.tag;return b.updateHeaderTitle("文章標籤 – "+b.showTag(b.target_tag))}else{b.updateHeaderTitle('找不到文章標籤 "'+d.tag+'" ！？');return b.target_tag=c}};return f()}])}).call(this);(function(){angular.module("scsBlogApp").controller("TagListCtrl",["$scope","$filter","$routeParams","$anchorScroll","$location",function(a,c,b,e,f){var d;a.clearQuery=function(){return a.query_keyword=""};a.getFilteredTags=function(){var g;g=c("orderBy")(a.tags);if(a.query_keyword!==""){g=c("filter")(g,a.query_keyword)}return g};d=function(){a.updateHeaderTitle("文章標籤");a.enableFilterPanel(false);a.tags=_.keys(APP_DATA.tags);return a.query_keyword=""};return d()}])}).call(this);