<div class="meta"><div class="title">用jasmine比對angularjs的object時出現失敗的情況</div><div class="datetime">2014-11-04 00:23:08</div><div class="tag">angularjs js_test jasmine</div><div class="category">programming</div><div class="link">fail-to-compare-object-in-angularjs-with-jasmine</div><div class="file">2014-11-04-002308-fail-to-compare-object-in-angularjs-with-jasmine</div><div class="template">post</div></div><h1>問題</h1><p>原本的測試檔如下：</p><div hljs="" include="&#39;code1&#39;" language="coffeescript"></div><script id="code1" type="text/ng-template">expect(model).toBe { "opt1":true, "opt2":true, "opt3":true }</script><p>結果跑測試出現了下面的錯誤：</p><pre><code class="hljs">PhantomJS 1.9.8 (Mac OS X) tau-checkbox-model contructor should set candidates with given array FAILED
Expected { opt3t1 : true, opt2 : true, opt3 : true } to be { opt1 : true, opt2 : true, opt3 : true }.</code></pre><h1>原因</h1><p>AngularJS會在object中多加一些附屬屬性，導致jasmine比對時會視做不同的object。</p><h1>解法</h1><p>將上面的測試改成</p><div hljs="" include="&#39;code2&#39;" language="coffeescript"></div><script id="code2" type="text/ng-template">expect(angular.equals(model, { "opt1":true, "opt2":true, "opt3":true })).toBe true</script><h1>Refs</h1><ul><li><a href="http://stackoverflow.com/questions/15487510/angularjs-jasmine-comparing-objects" target="_blank">SO - AngularJS + Jasmine: Comparing objects</a></li></ul>
