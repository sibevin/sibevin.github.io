<!DOCTYPE html><html><head><meta charset="utf-8" /><meta content="width=device-width, initial-scale=1.0" name="viewport" /><title>docker 筆記</title><meta content="" name="description" /><meta content="docker 筆記" property="og:title" /><meta content="" property="og:description" /><meta content="魔法師的手杖" property="og:site_name" /><link href="//cdn.jsdelivr.net/highlight.js/8.7.0/styles/hybrid.min.css" rel="stylesheet" /><link href="/css/application.css" rel="stylesheet" /><link href="/favicon.ico?" rel="shortcut icon" type="image/x-icon" /><script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.3/angular.min.js"></script><script crossorigin="anonymous" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" src="https://code.jquery.com/jquery-2.2.4.min.js"></script><script src="//cdn.jsdelivr.net/highlight.js/8.7.0/highlight.min.js"></script><script src="//cdn.jsdelivr.net/lodash/3.10.1/lodash.min.js"></script><script src="/js/vendor/angular-tau-utils.min.js"></script><script src="/js/vendor/focusIf.min.js"></script><script src="/js/vendor/md5.min.js"></script><script src="/js/vendor/contents.js"></script><script src="/js/vendor/emojify.min.js"></script><script src="/js/app.js"></script><script>hljs.initHighlightingOnLoad();</script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-26486503-2', 'auto');
ga('send', 'pageview');</script></head><body class="theme-color-default layout" ng-class="{&#39;lo-menu-open&#39;:footer_ts.isTab(&#39;menu&#39;),&#39;lo-toc-open&#39;:footer_ts.isTab(&#39;toc&#39;)}" ng-controller="LayoutCtrl" ng-keydown="layoutKeyDown($event)"><div class="main-container"><section class="main"><script>angular.module("scsBlogApp").constant("CURRENT_FILE", "2016-10-02-144725-docker-note");</script><div class="post" ng-controller="PostCtrl"><div class="title"><div class="title-img"><a href="/posts"><img src="/images/menu/paper_76x.svg" /></a></div><div class="title-main"><div class="title-text">docker 筆記</div><div class="title-info"><div class="title-time"><div class="time">2016-10-02 14:47:25</div></div><div class="title-tcs"><div class="tag" ng-repeat="tag in getPostTags(current_post)" ng-style="{&#39;background-color&#39;:tag.color}"><a class="tag-link" ng-href="/tags?t={{tag.code}}">{{tag.name}}</a></div><div class="category-icon"><a ng-href="/categories?c={{getPostCategory(current_post).code}}"><div class="ca-icon-{{getPostCategory(current_post).code}}"></div></a></div></div></div></div></div><div class="content"><div class="meta-data">title docker 筆記</div><div class="meta-data">datetime 2016-10-02 14:47:25</div><div class="meta-data">tags docker</div><div class="meta-data">category tools</div><div class="meta-data">link docker-note</div><div class="meta-data">file 2016-10-02-144725-docker-note</div><div class="meta-data">template post</div><div class="meta-data">end</div><h1>一般的 vm 與 docker 差在哪？</h1><p>一般的 vm 會在 hypervisor上再架一個完整的 Guest OS，接著才會安裝對應的 library 與 application。而 docker 會是基於 Docker Engine上跑多個 container，每一個 container 都是一支獨立的 user process，共用 Host OS 的 Kernel。</p><div class="rwd-table"><table><tbody><tr><td>一般的 vm</td><td>docker</td></tr><tr><td class="table-block"><table><tbody><tr><td>Applications 01</td><td>Applications 02</td><td>Applications 03</td></tr><tr><td>libraries 01</td><td>libraries 02</td><td>libraries 03</td></tr><tr class="text-red"><td>Guest OS 01</td><td>Guest OS 02</td><td>Guest OS 03</td></tr><tr class="text-blue"><td colspan="3">Hyervisor (例如：VirtualBox)</td></tr><tr><td colspan="3">Host OS</td></tr></tbody></table></td><td class="table-block"><table><tbody><tr><td><span class="text-green">Container 01</span><table><tbody><tr><td>Application 01 </td></tr><tr><td>Libraries 01 </td></tr></tbody></table></td><td><span class="text-green">Container 02</span><table><tbody><tr><td>Application 02 </td></tr><tr><td>Libraries 02 </td></tr></tbody></table></td><td><span class="text-green">Container 03</span><table><tbody><tr><td>Application 03 </td></tr><tr><td>Libraries 03 </td></tr></tbody></table></td></tr><tr class="text-blue"><td colspan="3">Docker Engine</td></tr><tr><td colspan="3">Host OS</td></tr></tbody></table></td></tr></tbody></table></div><h2>Refs</h2><ul><li><a href="https://www.docker.com/what-docker" target="_blank">WHAT IS DOCKER?</a></li><li><a href="http://stackoverflow.com/questions/16047306/how-is-docker-different-from-a-normal-virtual-machine" target="_blank">SO - How is Docker different from a normal virtual machine?</a></li></ul><h1>基本名詞</h1><h2>Docker Client</h2><p>一個工具用來讓使用者可以對 Docker Daemon 送指令與設定。</p><h2>Docker Daemon</h2><p>一個跑在 Host Machine 的程式，用來操作 Docker。</p><div class="image-center"><img alt="Dockerfile, Image and Container" src="/images/post/20161002180552965-docker-image-container.png" /><div class="image-text">Dockerfile, Image and Container</div></div><h2>Dockerfile</h2><p>一個檔案用來定義一個 Docker Image 要怎麼產生的，也就是 Docker Image 的原始檔。裡面包含了多個指令來描述 Docker Image 要怎麼被建立。在整個 Docker 的運作中只會被讀取用來建立 Docker Image，而不會被 Docker 更改。</p><h2>Docker Image</h2><p>一個檔案用來定義怎麼建立 Docker Container，它是 Dockerfile 生成的產物，包含了跑一個應用程式所需的執行環境與函式庫。可以使用 <code>build</code>這個指令來從 Dockerfile 建立 Docker Image。</p><h2>Docker Container</h2><p>Docker Container 是一個 Docker Image 的可執行實體(runnable instance)，當它被建立的時候，除了包含了對應的 Docker Image 外，Docker 還會建立一個對應的 read-write file system 與並做一些初始化與網路設定。當它被執行時，Docker Container 會有一隻對應的正在執行中的 process。可以使用 <code>create</code>指令從 Docker Image 來建立一個 Docker Container。使用 <code>start</code>執行 Docker Container。一個正在執行中的 Docker Container 也有 <code>stop, restart</code>等指令可以使用。</p><h2>Docker Register</h2><p>用來存放 Docker Image 的地方，當需要使用 Docker Image 時，可以直接從 Docker Register 下載而不用重新 build image。</p><h2>Refs</h2><ul><li><a href="https://docs.docker.com/engine/understanding-docker/" target="_blank">Docker Overview</a></li><li><a href="http://stackoverflow.com/questions/23735149/docker-image-vs-container" target="_blank">SO - Docker image vs container</a></li><li><a href="http://www.slideshare.net/trunk-studio/docker-65378344" target="_blank">創科 從零開始認識 Docker</a></li></ul><div id="disqus_thread"></div><script>/* * * CONFIGURATION VARIABLES * * */
var disqus_shortname = 'wizard-note';
var disqus_identifier = 'docker-note';
/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script></div></div></section></div><header class="header"><table><tbody><tr><td class="hd-btn-td"><a class="hd-btn-menu" href="#" ng-class="{active: footer_ts.isTab(&#39;menu&#39;)}" ng-click="switchFooter(&#39;menu&#39;)"><div class="hd-icon"></div></a></td><td class="hd-btn-td" ng-show="has_toc"><a class="hd-btn-toc" href="#" ng-class="{active: footer_ts.isTab(&#39;toc&#39;)}" ng-click="switchFooter(&#39;toc&#39;)"><div class="hd-icon"></div></a></td><td class="hd-btn-td"><a class="hd-btn-search" href="#" ng-class="{active: footer_ts.isTab(&#39;search&#39;)}" ng-click="switchFooter(&#39;search&#39;)"><div class="hd-icon"></div></a></td><td class="hd-op-td"><input class="hd-input-search" focus-if="footer_ts.isTab(&#39;search&#39;)" ng-model="query_keyword" ng-show="footer_ts.isTab(&#39;search&#39;)" /><a class="hd-trademark" href="/" ng-hide="footer_ts.isTab(&#39;search&#39;)"><img alt="魔法師的手杖" height="50" src="/images/header/trademark_50x.svg" title="魔法師的手杖" width="50" /></a></td></tr></tbody></table></header><nav class="menu"><ul><li><a class="mu-btn-paper active" href="/posts"><div class="mu-icon"></div>文章</a></li><li><a class="mu-btn-category" href="/categories"><div class="mu-icon"></div>分類</a></li><li><a class="mu-btn-tag" href="/tags"><div class="mu-icon"></div>標籤</a></li><li><a class="mu-btn-work" href="/works"><div class="mu-icon"></div>作品</a></li><li><a class="mu-btn-wizard" href="/about"><div class="mu-icon"></div>關於</a></li></ul></nav><nav class="toc"></nav><aside class="search-result-panel" ng-show="footer_ts.isTab(&#39;search&#39;)"><div class="posts"><div class="post-list"><div class="pl-row" ng-repeat="post in getSearchPosts()"><div class="pl-cell pl-title"><div class="category-icon"><a ng-href="/categories?c={{getPostCategory(post).code}}"><div class="ca-icon-{{getPostCategory(post).code}}"></div></a></div><a href="/posts/{{post.file}}">{{post.title}}</a><a href="{{post.website}}" ng-show="post.website" target="_blank"><img class="pl-weblink" src="/images/list/weblink_25x.svg" /></a></div><div class="pl-cell pl-tcs"><div class="tag" ng-repeat="tag in getPostTags(post)" ng-style="{&#39;background-color&#39;:tag.color}"><a class="tag-link" ng-href="/tags?t={{tag.code}}">{{tag.name}}</a></div></div><div class="pl-cell pl-time"><div class="time">{{post.datetime}}</div></div></div></div></div></aside></body><script>$(function () {
  // TOC
  try {
    var contents,
        articleId;
    articleId = function (articleName, element) {
      return md5(articleName + element.previousSibling.innerText + element.nextSibling.innerText);
    };
    contents = gajus
      .Contents({articleId: articleId});
    $('.toc').append(contents.list());
  } catch(e) {
  }
  // emoji
  emojify.setConfig({
    ignore_emoticons: true,
    img_dir: '/images/emoji',
    blacklist: {
      elements: ['script', 'textarea', 'pre', 'code'],
      classes: ['no-emojify']
    }
  });
  emojify.run();
});</script></html>
